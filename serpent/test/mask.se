macro mask($a, $asz, $target):
    with amask = array($asz):
        with i = 0:
            while i < $asz:
                if $a[i] == $target:
                    amask[i] = 1
                else:
                    amask[i] = 0
                i += 1
            amask

def test_mask():
    a = [5, 1, 1, 0, 2]
    asz = 5
    amask = mask(a, asz, 0)
    expected = [0, 0, 0, 1, 0]
    i = 0
    while i < asz:
        if amask[i] != expected[i]:
            return(0)
        i += 1
    return(1)
